[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------< org.example:core-banking-system >-------------------
[INFO] Building Core Banking System 1.0.0
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ core-banking-system ---
[INFO] Copying 3 resources from src\main\resources to target\classes
[INFO] Copying 7 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ core-banking-system ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ core-banking-system ---
[INFO] skip non existing resourceDirectory C:\Users\Sudhan S\OneDrive\Desktop\projects\Core-banking-system\core-banking-system-backend\src\test\resources
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ core-banking-system ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- surefire:3.1.2:test (default-test) @ core-banking-system ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.cbs.integration.AuditIntegrationTest
00:43:40.371 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.cbs.integration.AuditIntegrationTest]: AuditIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
00:43:40.626 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.cbs.CbsApplication for test class com.cbs.integration.AuditIntegrationTest

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.0)

2025-12-11T00:43:41.642+05:30  INFO 26608 --- [core-banking-system] [           main] c.cbs.integration.AuditIntegrationTest   : Starting AuditIntegrationTest using Java 21.0.8 with PID 26608 (started by Sudhan S in C:\Users\Sudhan S\OneDrive\Desktop\projects\Core-banking-system\core-banking-system-backend)
2025-12-11T00:43:41.644+05:30 DEBUG 26608 --- [core-banking-system] [           main] c.cbs.integration.AuditIntegrationTest   : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-12-11T00:43:41.645+05:30  INFO 26608 --- [core-banking-system] [           main] c.cbs.integration.AuditIntegrationTest   : The following 1 profile is active: "test"
2025-12-11T00:43:41.716+05:30 DEBUG 26608 --- [core-banking-system] [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2228db21
WARNING: A Java agent has been loaded dynamically (C:\Users\Sudhan S\.m2\repository\net\bytebuddy\byte-buddy-agent\1.14.10\byte-buddy-agent-1.14.10.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
2025-12-11T00:43:48.944+05:30  INFO 26608 --- [core-banking-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-11T00:43:49.748+05:30  INFO 26608 --- [core-banking-system] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-12-11T00:43:49.753+05:30  INFO 26608 --- [core-banking-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-11T00:43:50.026+05:30  INFO 26608 --- [core-banking-system] [           main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.22.3 by Redgate
2025-12-11T00:43:50.026+05:30  INFO 26608 --- [core-banking-system] [           main] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi
2025-12-11T00:43:50.026+05:30  INFO 26608 --- [core-banking-system] [           main] o.f.c.internal.license.VersionPrinter    : 
2025-12-11T00:43:50.150+05:30  INFO 26608 --- [core-banking-system] [           main] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:testdb (H2 2.2)
2025-12-11T00:43:50.161+05:30  WARN 26608 --- [core-banking-system] [           main] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-11T00:43:50.203+05:30  INFO 26608 --- [core-banking-system] [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-11T00:43:50.209+05:30  INFO 26608 --- [core-banking-system] [           main] o.f.core.internal.command.DbValidate     : Successfully validated 0 migrations (execution time 00:00.017s)
2025-12-11T00:43:50.209+05:30  WARN 26608 --- [core-banking-system] [           main] o.f.core.internal.command.DbValidate     : No migrations found. Are your locations set up correctly?
2025-12-11T00:43:50.223+05:30  INFO 26608 --- [core-banking-system] [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-11T00:43:50.294+05:30  INFO 26608 --- [core-banking-system] [           main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-11T00:43:50.301+05:30  INFO 26608 --- [core-banking-system] [           main] o.f.core.internal.command.DbMigrate      : Schema "PUBLIC" is up to date. No migration necessary.
2025-12-11T00:43:50.722+05:30  INFO 26608 --- [core-banking-system] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-11T00:43:50.999+05:30  INFO 26608 --- [core-banking-system] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final
2025-12-11T00:43:51.151+05:30  INFO 26608 --- [core-banking-system] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-11T00:43:51.529+05:30  WARN 26608 --- [core-banking-system] [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-11T00:43:53.359+05:30  INFO 26608 --- [core-banking-system] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
=== Environment Check ===
Database URL: jdbc:h2:mem:testdb
Database Username: sa
========================
2025-12-11T00:43:57.120+05:30  INFO 26608 --- [core-banking-system] [           main] com.cbs.service.impl.KYCServiceImpl      : KYC upload directory initialized at: C:\Users\Sudhan S\OneDrive\Desktop\projects\Core-banking-system\core-banking-system-backend\uploads\kyc
2025-12-11T00:43:57.672+05:30  WARN 26608 --- [core-banking-system] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-11T00:43:58.464+05:30 DEBUG 26608 --- [core-banking-system] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 69 mappings in 'requestMappingHandlerMapping'
2025-12-11T00:43:58.753+05:30 DEBUG 26608 --- [core-banking-system] [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T00:43:59.602+05:30 DEBUG 26608 --- [core-banking-system] [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T00:43:59.708+05:30 DEBUG 26608 --- [core-banking-system] [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T00:44:00.115+05:30  INFO 26608 --- [core-banking-system] [           main] c.cbs.integration.AuditIntegrationTest   : Started AuditIntegrationTest in 19.192 seconds (process running for 21.419)
[ERROR] Tests run: 5, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 21.05 s <<< FAILURE! -- in com.cbs.integration.AuditIntegrationTest
[ERROR] com.cbs.integration.AuditIntegrationTest.testLogActionsAndRetrieveByDateRange -- Time elapsed: 0.049 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <1> but was: <0>
	at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
	at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
	at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)
	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:145)
	at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:531)
	at com.cbs.integration.AuditIntegrationTest.testLogActionsAndRetrieveByDateRange(AuditIntegrationTest.java:126)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

[INFO] Running com.cbs.service.AuditServiceImplTest
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.429 s -- in com.cbs.service.AuditServiceImplTest
[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   AuditIntegrationTest.testLogActionsAndRetrieveByDateRange:126 expected: <1> but was: <0>
[INFO] 
[ERROR] Tests run: 14, Failures: 1, Errors: 0, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  27.479 s
[INFO] Finished at: 2025-12-11T00:44:01+05:30
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.1.2:test (default-test) on project core-banking-system: There are test failures.
[ERROR] 
[ERROR] Please refer to C:\Users\Sudhan S\OneDrive\Desktop\projects\Core-banking-system\core-banking-system-backend\target\surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
